"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2069],{2069:(I,g,n)=>{n.r(g),n.d(g,{HomePageModule:()=>O});var F=n(177),M=n(4341),d=n(9364),f=n(4964),j=n(467),E=n(2578),e=n(4438),b=n(6796),S=n(4902);const x=[{path:"",component:(()=>{var t;class s{constructor(o,i){this.authService=o,this.papa=i}ngOnInit(){}exportCSV(){var o=this;return(0,j.A)(function*(){try{const i=yield o.authService.fetchUserQuestionnaires();if(!i)return void console.error("No data found");const{userProfile:l,questionnaires:U}=i,h=U.map(a=>{var r,c,u;const C={};for(const[k,A]of Object.entries(a.responses))C[k]=String(A);return{Nome:null!==(r=null==l?void 0:l.name)&&void 0!==r?r:"",Email:null!==(c=null==l?void 0:l.email)&&void 0!==c?c:"",Timestamp:new Date(1e3*(null===(u=a.timestamp)||void 0===u?void 0:u.seconds)).toLocaleString(),...C}}),R=h.reduce((a,r)=>(Object.keys(r).forEach(c=>a.add(c)),a),new Set),v=Array.from(R).sort(),y=h.map(a=>{const r={};return v.forEach(c=>{var u;r[c]=null!==(u=a[c])&&void 0!==u?u:""}),r}).map(a=>v.map(r=>a[r]));y.unshift(v);const P=o.papa.unparse(y,{quotes:!1,delimiter:";",header:!0}),H=(P.replace(/\r?\n/g,"\r\n"),new Blob([P],{type:"text/csv;charset=utf-8;"}));(0,E.saveAs)(H,"questionnaires.csv");const $=URL.createObjectURL(H),p=document.createElement("a");p.setAttribute("href",$),p.setAttribute("download","questionnaires.csv"),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(i){console.error("Error exporting CSV:",i)}})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(b.u),e.rXU(S.F))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-home"]],decls:13,vars:0,consts:[[1,"wrapContent"],[3,"click"]],template:function(o,i){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"home"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0)(6,"div")(7,"h1"),e.EFF(8,"Hello World"),e.k0s(),e.j41(9,"p"),e.EFF(10,"Home page"),e.k0s(),e.j41(11,"ion-button",1),e.bIt("click",function(){return i.exportCSV()}),e.EFF(12,"Exportar Dados"),e.k0s()()()())},dependencies:[d.Jm,d.W9,d.eU,d.BC,d.ai],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color: #d1d2d4}.wrapContent[_ngcontent-%COMP%]{color:#000;height:100%;width:100%;text-align:center;align-items:center;display:flex;justify-content:center}"]}),s})()}];let D=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(x),f.iI]}),s})(),O=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[F.MD,M.YN,d.bv,D]}),s})()}}]);